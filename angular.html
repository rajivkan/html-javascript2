<!DOCTYPE html>
<html>
	<head>
		<style type="text/css">
			body{
				margin:0px;
				padding: 0px;
			}
			.table{
				border: 1px #ccc solid;
			}

			.table td, .table tr{
				border: 1px #ccc solid;
			}
		</style>
		<script type="text/javascript" src="js/angular/angular.min.js"></script>
		<script type="text/javascript" src="js/angular/angular-route.min.js"></script>
		
		<script type="text/javascript">
			var appSample = angular.module("appSample", ["ngRoute"]);

			appSample.config(['$routeProvider',
			    function($routeProvider) {
			        $routeProvider
			            .when('/', {
			                templateUrl: 'template/home.html',
			                controller: 'homeViewCtrl'
			            })
			            .when('/about', {
			                templateUrl: 'template/about.html',
			                controller: 'aboutViewCtrl'
			            })
			            .when('/contact', {
			                templateUrl: 'template/contact.html',
			                controller: 'contactViewCtrl'
			            })
			            .when('/register', {
			                templateUrl: 'template/registration.html',
			                controller: "registerCtrl"
			            })
			            .when('/student', {
			                templateUrl: 'template/students.html',
			                controller: "studentCtrl"
			            })
			            .when('/student/:studentId', {
			                templateUrl: 'template/student-details.html',
			                controller: "studentDetailCtrl"
			            })
			    }
			]);

			appSample.controller("homeViewCtrl", ["$scope", function($scope){
				$scope.message = "Welcome to Sample Application";
				$scope.displayButton = false;
				$scope.onMessage = function(){
					alert('call!');
				}
			}]);

			appSample.controller("aboutViewCtrl", ["$scope", function($scope){
				
			}]);

			appSample.controller("contactViewCtrl", ["$scope", function($scope){
				
			}]);

			appSample.controller("registerCtrl", ["$scope", function($scope){
				$scope.user = "User 1";
				$scope.email = "user@test.com"
			}]);

			appSample.directive("login", [function(){
				return {
					restrict: "C", // E, A, C
					templateUrl: "components/login.html"
				}
			}]);
			var studentsList = [];
			appSample.controller("studentCtrl", ["$scope", "$http", function($scope, $http){
				$http.get("data/data.json")
				.success(function(result){
					$scope.students = result.student;
					studentsList = $scope.students;
				})
				.error(function(err){
					alert("Unable to load student data list. Please try again.")
				});
			}]);

			appSample.controller("studentDetailCtrl", ["$scope", "$routeParams", function($scope, $routeParams){
				
				for(var i = 0; i < studentsList.length; i++){
					if(studentsList[i].studentId == $routeParams.studentId){
						$scope.student = studentsList[i];
						break;
					}
				}

			}]);

		</script>
	</head>
	<body ng-app="appSample">
		<table style="width:100%">
			<tr>
				<td style="height: 80px;background:#ccc; text-align:center">
					Sample project of AngularJS
				</td>
			</tr>
			<tr>
				<td style="min-height:500px;display:block;">
					<table style="width:100%">
						<tr>
							<td style="width:130px">
								<table style="width:100%">
									<tr>
										<td>
											<a href="#/">Home</a>
										</td>
									</tr>

									<tr>
										<td>
											<a href="#/about">About</a>
										</td>
									</tr>

									<tr>
										<td>
											<a href="#/contact">Contact</a>
										</td>
									</tr>
									<tr>
										<td>
											<a href="#/register">Register</a>
										</td>
									</tr>

									<tr>
										<td>
											<a href="#/student">Students</a>
										</td>
									</tr>
								</table>
							</td>
							<td>
								<div ng-view></div>
							</td>
						</tr>
					</table>
				</td>
			</tr>

			<tr>
				<td style="height:30px; background:#ccc; text-align:center">
					Footer Section
				</td>
			</tr>
		</table>
	</body>
</html>